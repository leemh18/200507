<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8"><!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width">
   <!--  <meta name="author" content="JM 교육용">
   <meta name="description" content="JM 교육용 동영상"> -->
    <!-- <meta name="keywords" content="JM 교육용 동영상"> -->
    <title>JM 교육용 동영상 </title>
    
    <!-- 구글 로그인  -->
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <script src="colors.js"></script>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <!-- <meta name="google-signin-client_id" content=""> -->

    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/font-awesome.css">
    <link rel="stylesheet" href="css/slick.css">
    <link rel="stylesheet" href="css/lightgallery.css">

   <script>

    function checkLoginStatus(){
      var loginBtn = document.querySelector('#loginBtn');
      var nameTxt = document.querySelector('.login2');
      if(gauth.isSignedIn.get()){
        console.log('logined');
        loginBtn.value = 'Logout';
        // 로그인 하면 메인으로 이동 
        setTimeout(function(){
            location.replace("index.php");
        },3000);
        var profile = gauth.currentUser.get().getBasicProfile();
        nameTxt.innerHTML = 'Welcome <strong>'+profile.getName()+'</strong> ';

      } else {
        console.log('logouted');
        loginBtn.value = 'Login';
        $("#loginBtn").css("display","block");
        nameTxt.innerHTML = '';
      }
    }

    function init(){ 
      console.log('init');
      gapi.load('auth2', function() {
      console.log('auth2');
      window.gauth = gapi.auth2.init({
          client_id:'507376114071-shua3b5a0j5ep84479m2hov4a220079b.apps.googleusercontent.com'
        })
      gauth.then(function(){
          console.log('googleAuth success');
          checkLoginStatus();

        }, function(){
          console.log('googleAuth fail');

        });
      });
    }
  </script>
   
</head>
<body>
       <main>
        <section id="contents">
            <div class="login">
                <h2 class="ir_su">구글 로그인 페이지</h2>
                <article class="column col0">
                <h4 class="col_tit">JM 구글 로그인</h4>
                <h2 class="login_01">JM 교육동영상  </h2>
                <h2 class="login_02"> 아래 Login 버튼을 클릭!! </h2>
                <h4 class="login_03">: 유튜브 동영상을 시청 하기 위해서는 이명호 실장에게 권한을 요청 해 주세요!!</h4>
            </div>
           
           <div class="login2">
            <span id="login_name" ></span>
                <input type="button" id="loginBtn" value="checking..." onclick="
              if(this.value === 'Login'){
                gauth.signIn().then(function(){
                  console.log('gauth.signIn()');
                  checkLoginStatus();
                });
              } else {
                gauth.signOut().then(function(){
                  console.log('gauth.signOut()');
                  checkLoginStatus();
                });
              }
            " >
          </div>
      </section>
       
    </main>

    <!-- <script>
    function onSignIn(googleUser) {
      var profile = googleUser.getBasicProfile();
      console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
      console.log('Name: ' + profile.getName());
      console.log('Image URL: ' + profile.getImageUrl());
      console.log('Email: ' + profile.getEmail()); 
    }
  </script> -->

<script src="https://apis.google.com/js/platform.js?onload=init" async defer></script>

</body>
</html>
